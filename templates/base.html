<!doctype html>
<html class="no-js" lang="en">
<head>
  <meta charset="utf-8">

  <title>Count MODE</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="shortcut icon" href="/static/favicon.ico">

<!-- CSS part  -->
  <style>
    .mHover:hover{
      background-color: rgb(101, 207, 248);
    } 
    #mClick:focus {
      background-color: rgb(101, 207, 248);
    } 
    #mClick:focus::after {
      background-color: rgb(101, 207, 248);
      content: ' ('attr(title)')';
    }      
  </style>
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/less.js/1.4.1/less.min.js"></script>
  <script>window.less || document.write('<script src="/static/js/less.js">\x3C/script>')</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@0.4.0/dist/chartjs-plugin-datalabels.min.js"></script>

</head>

<body>

  <nav class="navbar navbar-expand navbar-dark bg-dark fixed-top" style="background-color: black; width: 100%;">
    <div class="container-fluid" >
        <button class="btn menu-btn" type="button" style="display:none;" onclick="show_side_menu()" >
            <span class="navbar-toggler-icon"></span>
        </button>
      <a class="navbar-brand" href="#">&nbsp;WORD</a>
      <div class="collapse navbar-collapse "  >
        <ul class="navbar-nav me-auto mb-2 mb-lg-0 menu-top">
          <li class="nav-item">
            <a class="nav-link top_nav_menu active" href="#">Select Mode></a>
          </li>
          <li class="nav-item">
            <a class="nav-link top_nav_menu active" href="/">Count</a>
          </li>
          <li class="nav-item">
            <a class="nav-link top_nav_menu" href="/similarity">Similarity</a>
          </li>
          <li class="nav-item">
            <a class="nav-link top_nav_menu" href="/matching">Matching</a>
          </li>
          <li class="nav-item">
            <a class="nav-link top_nav_menu" href="/about">About us</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="d-flex flex-column p-3 text-white bg-dark side-menu " style="width: 280px;height:100vh;position:fixed;left:-280px">
        
    <ul class="nav nav-pills flex-column mb-auto pt-5 side_nav_menu">

    </ul>
    
  </div>
  <div class=" pt-5 main-content-div" style="padding-left: 1px;margin-top: 10px; margin-left: 10px;">
    
    <div>
      <form action="/" method="post">
        {{form.hidden_tag()}}
        {{form.message.label}}
        <br>
        {{form.message(placeholder=message)}}
        <br>
        {{form.submit()}}
      </form>
    </div>
  
    <hr>
    <!-- ส่วนแสดงผล -->
    {% if message %}
      <!-- แสดงข้อความที่รับมา -->
      <div style="width: 500px">       
        message = 
        {% for i in Tag %}
          <span class="mHover" id="mClick" tabindex="0" title={{Tag[i]}} ><strong>{{i}}</strong></span>
        {% endfor %}
      </div>
      <br>
  
      <!-- คำทั้งหมด,ความถี่ของคำ,ประเภทคำ -->
      <h5>Frequency List 1</h5>
      {% if noun!={} or pron!={} or verb!={} or adj!={} or adv!={} or adp!={} or conj!={} or det!={} or intj!={}%}
        {% if noun!={} %}
          <div style="width: 300px; height: 100px; border: 2px solid black; overflow: auto; ">
          <p style="padding-left: 5px; margin: 0 auto; position:sticky;top: 0;background-color: wheat">
            <strong>Noun</strong> ({{Nnnoun}},{{Fnoun}})
          </p> 
          <hr style="margin-top: 5px; margin-bottom: 5px;">
          {% for i in fWordSort %}
          {% set check = namespace(h_bool=false)%}
            {% for j in noun if check.h_bool == false%}
              {% if (j|string).lower() == i %}
                <div style="padding-left: 5px;">
                <span class="mHover" >{{(j|string).lower()}} = {{Nnoun[i]}}</span>
                </div>
                {% set check.h_bool = true %}
              {% endif %}
            {% endfor %}        
          {% endfor %}
          </div>
        {% endif %}

        {% if pron!={} %}
          <div style="width: 300px; height: 100px; border: 2px solid black; overflow: auto; ">
          <p style="padding-left: 5px; margin: 0 auto; position:sticky;top: 0;background-color: wheat">
            <strong>Pronoun</strong> ({{Nnpron}},{{Fpron}})
          </p> 
          <hr style="margin-top: 5px; margin-bottom: 5px;">
          {% for i in fWordSort %}
          {% set check = namespace(h_bool=false)%}
            {% for j in pron if check.h_bool == false%}
              {% if (j|string).lower() == i %}
                <div style="padding-left: 5px;">
                <span class="mHover" >{{(j|string).lower()}} = {{Npron[i]}}</span>
                </div>
                {% set check.h_bool = true %}
              {% endif %}
            {% endfor %}        
          {% endfor %}
          </div>
        {% endif %}

        {% if verb!={} %}
          <div style="width: 300px; height: 100px; border: 2px solid black; overflow: auto; ">
          <p style="padding-left: 5px; margin: 0 auto; position:sticky;top: 0;background-color: wheat">
            <strong>Verb</strong> ({{Nnverb}},{{Fverb}})
          </p> 
          <hr style="margin-top: 5px; margin-bottom: 5px;">
          {% for i in fWordSort %}
          {% set check = namespace(h_bool=false)%}
            {% for j in verb if check.h_bool == false%}
              {% if (j|string).lower() == i %}
                <div style="padding-left: 5px;">
                <span class="mHover" >{{(j|string).lower()}} = {{Nverb[i]}}</span>
                </div>
                {% set check.h_bool = true %}
              {% endif %}
            {% endfor %}        
          {% endfor %}
          </div>
        {% endif %}

        {% if adj!={} %}
          <div style="width: 300px; height: 100px; border: 2px solid black; overflow: auto; ">
          <p style="padding-left: 5px; margin: 0 auto; position:sticky;top: 0;background-color: wheat">
            <strong>Adjective</strong>({{Nnadj}},{{Fadj}})
          </p> 
          <hr style="margin-top: 5px; margin-bottom: 5px;">
          {% for i in fWordSort %}
          {% set check = namespace(h_bool=false)%}
            {% for j in adj if check.h_bool == false%}
              {% if (j|string).lower() == i %}
                <div style="padding-left: 5px;">
                <span class="mHover" >{{(j|string).lower()}} = {{Nadj[i]}}</span>
                </div>
                {% set check.h_bool = true %}
              {% endif %}
            {% endfor %}        
          {% endfor %}
          </div>
        {% endif %}

        {% if adv!={} %}
          <div style="width: 300px; height: 100px; border: 2px solid black; overflow: auto; ">
          <p style="padding-left: 5px; margin: 0 auto; position:sticky;top: 0;background-color: wheat">
            <strong>Adverb</strong> ({{Nnadv}},{{Fadv}})
          </p> 
          <hr style="margin-top: 5px; margin-bottom: 5px;">
          {% for i in fWordSort %}
          {% set check = namespace(h_bool=false)%}
            {% for j in adv if check.h_bool == false%}
              {% if (j|string).lower() == i %}
                <div style="padding-left: 5px;">
                <span class="mHover" >{{(j|string).lower()}} = {{Nadv[i]}}</span>
                </div>
                {% set check.h_bool = true %}
              {% endif %}
            {% endfor %}        
          {% endfor %}
          </div>
        {% endif %}


        {% if adp!={} %}
          <div style="width: 300px; height: 100px; border: 2px solid black; overflow: auto; ">
          <p style="padding-left: 5px; margin: 0 auto; position:sticky;top: 0;background-color: wheat">
            <strong>Preposition</strong> ({{Nnadp}},{{Fadp}})
          </p> 
          <hr style="margin-top: 5px; margin-bottom: 5px;">
          {% for i in fWordSort %}
          {% set check = namespace(h_bool=false)%}
            {% for j in adp if check.h_bool == false%}
              {% if (j|string).lower() == i %}
                <div style="padding-left: 5px;">
                <span class="mHover" >{{(j|string).lower()}} = {{Nadp[i]}}</span>
                </div>
                {% set check.h_bool = true %}
              {% endif %}
            {% endfor %}        
          {% endfor %}
          </div>
        {% endif %}
        
        {% if conj!={} %}
          <div style="width: 300px; height: 100px; border: 2px solid black; overflow: auto; ">
          <p style="padding-left: 5px; margin: 0 auto; position:sticky;top: 0;background-color: wheat">
            <strong>Conjunction</strong> ({{Nnconj}},{{Fconj}})
          </p> 
          <hr style="margin-top: 5px; margin-bottom: 5px;">
          {% for i in fWordSort %}
          {% set check = namespace(h_bool=false)%}
            {% for j in conj if check.h_bool == false%}
              {% if (j|string).lower() == i %}
                <div style="padding-left: 5px;">
                <span class="mHover" >{{(j|string).lower()}} = {{Nconj[i]}}</span>
                </div>
                {% set check.h_bool = true %}
              {% endif %}
            {% endfor %}        
          {% endfor %}
          </div>
        {% endif %}

        {% if det!={} %}
          <div style="width: 300px; height: 100px; border: 2px solid black; overflow: auto; ">
          <p style="padding-left: 5px; margin: 0 auto; position:sticky;top: 0;background-color: wheat">
            <strong>Determiner</strong> ({{Nndet}},{{Fdet}})
          </p> 
          <hr style="margin-top: 5px; margin-bottom: 5px;">
          {% for i in fWordSort %}
          {% set check = namespace(h_bool=false)%}
            {% for j in det if check.h_bool == false%}
              {% if (j|string).lower() == i %}
                <div style="padding-left: 5px;">
                <span class="mHover" >{{(j|string).lower()}} = {{Ndet[i]}}</span>
                </div>
                {% set check.h_bool = true %}
              {% endif %}
            {% endfor %}        
          {% endfor %}
          </div>
        {% endif %}

        {% if intj!={} %}
          <div style="width: 300px; height: 100px; border: 2px solid black; overflow: auto; ">
          <p style="padding-left: 5px; margin: 0 auto; position:sticky;top: 0;background-color: wheat">
            <strong>Interjection</strong> ({{Nnintj}},{{Fintj}})
          </p> 
          <hr style="margin-top: 5px; margin-bottom: 5px;">
          {% for i in fWordSort %}
          {% set check = namespace(h_bool=false)%}
            {% for j in intj if check.h_bool == false%}
              {% if (j|string).lower() == i %}
                <div style="padding-left: 5px;">
                <span class="mHover" >{{(j|string).lower()}} = {{Nintj[i]}}</span>
                </div>
                {% set check.h_bool = true %}
              {% endif %}
            {% endfor %}        
          {% endfor %}
          </div>
        {% endif %}

        <!-- {% if num!={} %}
          <div style="width: 300px; height: 100px; border: 2px solid black; overflow: auto; ">
          <p style="padding-left: 5px; margin: 0 auto; position:sticky;top: 0;background-color: wheat">
            <strong>Numeral</strong> ({{Nnnum}},{{Fnum}})
          </p> 
          <hr style="margin-top: 5px; margin-bottom: 5px;">
          {% for i in fWordSort %}
          {% set check = namespace(h_bool=false)%}
            {% for j in num if check.h_bool == false%}
              {% if (j|string).lower() == i %}
                <div style="padding-left: 5px;">
                <span class="mHover" >{{(j|string).lower()}} = {{Nnum[i]}}</span>
                </div>
                {% set check.h_bool = true %}
              {% endif %}
            {% endfor %}        
          {% endfor %}
          </div>
        {% endif %} -->

        <!-- {% if punct!={} %}
          <div style="width: 300px; height: 100px; border: 2px solid black; overflow: auto; ">
          <p style="padding-left: 5px; margin: 0 auto; position:sticky;top: 0;background-color: wheat">
            <strong>Punctuation</strong> ({{Nnpunct}},{{Fpunct}})
          </p> 
          <hr style="margin-top: 5px; margin-bottom: 5px;">
          {% for i in fWordSort %}
          {% set check = namespace(h_bool=false)%}
            {% for j in punct if check.h_bool == false%}
              {% if (j|string).lower() == i %}
                <div style="padding-left: 5px;">
                <span class="mHover" >{{(j|string).lower()}} = {{Npunct[i]}}</span>
                </div>
                {% set check.h_bool = true %}
              {% endif %}
            {% endfor %}        
          {% endfor %}
          </div>
        {% endif %} -->

        <!-- {% if sym!={} %}
          <div style="width: 300px; height: 100px; border: 2px solid black; overflow: auto; ">
          <p style="padding-left: 5px; margin: 0 auto; position:sticky;top: 0;background-color: wheat">
            <strong>Symbol</strong> ({{Nnsym}},{{Fsym}})
          </p> 
          <hr style="margin-top: 5px; margin-bottom: 5px;">
          {% for i in fWordSort %}
          {% set check = namespace(h_bool=false)%}
            {% for j in sym if check.h_bool == false%}
              {% if (j|string).lower() == i %}
                <div style="padding-left: 5px;">
                <span class="mHover" >{{(j|string).lower()}} = {{Nsym[i]}}</span>
                </div>
                {% set check.h_bool = true %}
              {% endif %}
            {% endfor %}        
          {% endfor %}
          </div>
        {% endif %} -->

        <!-- {% if x!={} %}
          <div style="width: 300px; height: 100px; border: 2px solid black; overflow: auto; ">
          <p style="padding-left: 5px; margin: 0 auto; position:sticky;top: 0;background-color: wheat">
            <strong>Other</strong> ({{Nnx}},{{Fx}})
          </p> 
          <hr style="margin-top: 5px; margin-bottom: 5px;">
          {% for i in fWordSort %}
          {% set check = namespace(h_bool=false)%}
            {% for j in x if check.h_bool == false%}
              {% if (j|string).lower() == i %}
                <div style="padding-left: 5px;">
                <span class="mHover" >{{(j|string).lower()}} = {{Nx[i]}}</span>
                </div>
                {% set check.h_bool = true %}
              {% endif %}
            {% endfor %}        
          {% endfor %}
          </div>
        {% endif %} -->
      <br>
      {% else %}
          <span>...<strong>Nothing Shows</strong></span>
      {% endif %}
      <br>
      <h5>Frequency List 2</h5>
      <!-- จำนวนคำทั้งหมด -->
      <span>Words ={{cWord}}</span>
      <br>
      <!-- จำนวนประโยค -->
      <span>Sentences ={{cSent}}</span>
      <br>
      <!-- จำนวนตัวอักษร -->
      <!-- <span>Characters ={{cAlp}}</span>
      <br> -->
      <!-- จำนวนตัวอักษรไม่รวมเว้นวรรค -->
      <!-- <span>Characters(No space) ={{cAlpNoSp}}</span>
      <br> -->
      <span>Paragraph = {{cPar}}</span>
      <br>
      <span>Punctuation = {{Fpunct}}</span>
      <br>
      <canvas id="myChart" style="width:100%;max-width:700px"></canvas>
      <br>
      <canvas id="myChart2" style="width:100%;max-width:700px"></canvas>
      <br>

    {% elif message=="" %}
      <strong>No Message send!</strong> 
    {% endif %}
    
  </div>

  <!-- Script chart -->
  <script>
    var xValues = [{% if adj!={} %}"Adjective",{%endif%}
    {% if adp!={} %}"Adposition",{%endif%}
    {% if adv!={} %}"Adverb",{%endif%}
    {% if conj!={} %}"Conjunction",{%endif%}
    {% if det!={} %}"Determiner",{%endif%}
    {% if intj!={} %}"Interjection",{%endif%}
    {% if noun!={} %}"Noun",{%endif%}
    // {% if num!={} %}"Numeral",{%endif%}
    {% if pron!={} %}"Pronoun",{%endif%}
    {% if punct!={} %}"Punctuation",{%endif%}
    // {% if sym!={} %}"Symbol",{%endif%}
    {% if verb!={} %}"Verb",{%endif%}
    // {% if x!={} %}"Other"{%endif%}
  ];
    
    var yValues = [{% if adj!={} %} {{Fadj}}, {%endif%}
    {% if adp!={} %} {{Fadp}}, {%endif%}
    {% if adv!={} %} {{Fadv}}, {%endif%}
    {% if conj!={} %} {{Fconj}}, {%endif%}
    {% if det!={} %} {{Fdet}}, {%endif%}
    {% if intj!={} %} {{Fintj}}, {%endif%}
    {% if noun!={} %} {{Fnoun}}, {%endif%}
    // {% if num!={} %} {{Fnum}}, {%endif%}
    {% if pron!={} %} {{Fpron}}, {%endif%}
    {% if punct!={} %} {{Fpunct}}, {%endif%}
    // {% if sym!={} %} {{Fsym}}, {%endif%}
    {% if verb!={} %} {{Fverb}}, {%endif%}
    // {% if x!={} %} {{Fx}} {%endif%}
  ];

    var barColors = ["#B22222", "#FF8C00","#808000","#228B22","#2E8B57","#0000CD","#8A2BE2","#FF1493","#D2691E","#778899"];

    new Chart("myChart", {
      type: "bar",
      data: {
        labels: xValues,
        datasets: [{
          backgroundColor: barColors,
          data: yValues
        }]
      },
      options: {
        legend: {display: false},
        title: {
          display: true,
          text: "Frequency of Parts of Speech"
        },
        scales: {
          xAxes: [{
            scaleLabel: {
              display: true,
              labelString: 'Parts of Speech'
            },
          }],
          yAxes: [{
            scaleLabel: {
              display: true,
              labelString: 'Frequency(Words)'
            },
            ticks: {
              beginAtZero: true,
              callback: function(value) {if (value % 1 === 0) {return value;}}
            }
          }]
        },
        plugins: {
          datalabels: {
            color: '#fff',
          }
        }   
      }
    });

    new Chart("myChart2", {
      type: "pie",
      data: {
        labels: xValues,
        datasets: [{
          backgroundColor: barColors,
          data: yValues
        }]
      },
      options: {
        title: {
          display: true,
          text: "Part of speech frequency"
        },
        tooltips: {
          enabled: false
        },
        plugins: {
          datalabels: {
            formatter: (value, ctx) => {
              let datasets = ctx.chart.data.datasets;
              if (datasets.indexOf(ctx.dataset) === datasets.length - 1) {
                let sum = datasets[0].data.reduce((a, b) => a + b, 0);
                let percentage = Math.round((value / sum) * 100) + '%';
                return percentage;
              } else {
                return percentage;
              }
            },
            color: '#fff',
          }
        }
      }
    });
  </script>

  <!-- JS แสดงแถบเลือกเมนูเมื่อหน้าจอเล็ก -->
  <script>

    function show_side_menu()//function สำหรับแสดง หรือซ่อน side เมนู
    {
        let left_pos=parseInt(document.querySelector(".side-menu").style.left.replace("px",""));

        if(left_pos==-280)//ถ้า side เมนูยังไม่แสดง ให้แสดง side เมนู แบบ animation
        {

            var menu_animation=setInterval(function(){

                left_pos+=5;
                document.querySelector(".side-menu").style.left=left_pos.toString()+"px";

                var left_content=parseInt(document.querySelector(".main-content-div").style.paddingLeft.replace("px",""));
                left_content+=5;

                document.querySelector(".main-content-div").style.paddingLeft=left_content.toString()+"px";

                
                if(left_pos==0)
                {
                    clearInterval(menu_animation);
                }

            },1);
        }
        else
        {   //ถ้า side เมนูยังแสดงอยู่ ให้ซ่อน side เมนู แบบ  animation
            var menu_animation=setInterval(function(){

                left_pos-=5;
                document.querySelector(".side-menu").style.left=left_pos.toString()+"px";

                var left_content=parseInt(document.querySelector(".main-content-div").style.paddingLeft.replace("px",""));
                left_content-=5;
                
                document.querySelector(".main-content-div").style.paddingLeft=left_content.toString()+"px";
                
                if(left_pos==-280)
                {
                    clearInterval(menu_animation);
                }

            },1);
        }
        
    }

    function responsive()//function กำหนดให้ซ่อนปุ่ม เปิดปิด เมนูข้าง หรือแสดงเมนูบน
    {
        if(window.innerWidth <= 768)//หน้าจอน้อยกว่า หรือเท่ากับ 768
        {
            document.querySelector(".menu-top").style.display="none";//ซ่อนเมนูบน
            document.querySelector(".menu-btn").style.display="";//แสดงปุ่มสำหรับเมนูข้าง
        }
        else
        {
            document.querySelector(".menu-top").style.display="";//ซ่อนเมนูบน
            document.querySelector(".menu-btn").style.display="none";//ซ่อนปุ่มสำหรับเมนูข้าง
        }
    }
    
    (function(){
      //-----เมื่อเปิดหน้าเว็บมาเราจะให้ เมนูด้านบน กับ Side เมนูด้านข้างมีเมนูแบบเดียวกัน
      var top_nav_menu=document.querySelectorAll(".top_nav_menu");
      var side_menu_html="";
      top_nav_menu.forEach(element => {
          side_menu_html+=`<li class="nav-item">
          <a href="${element.href}" class="nav-link text-white ">
              ${element.innerHTML}
          </a>
        </li>`;
      });
      document.querySelector(".side_nav_menu").innerHTML=side_menu_html;

      responsive();

    })();
    // ถ้าหน้าเว็บมีการเปลี่ยนขนาดให้เรียก function responsive() เพื่อ ดูว่าจะซ่อน หรือ แสดงเมนูบน
    window.addEventListener("resize", function(){

        responsive();
        
    });
    //หากมีการคลิกที่เนื้อหาเว็บ แต่ Side เมนูเปิดอยู่ ให้ซ่อน Side เมนู
    document.querySelector("body").addEventListener("click", function(){

        let left_pos=parseInt(document.querySelector(".side-menu").style.left.replace("px",""));
        if(left_pos==0)
        {
            var menu_animation=setInterval(function(){

                left_pos-=5;
                document.querySelector(".side-menu").style.left=left_pos.toString()+"px";

                var left_content=parseInt(document.querySelector(".main-content-div").style.paddingLeft.replace("px",""));
                left_content-=5;
                
                document.querySelector(".main-content-div").style.paddingLeft=left_content.toString()+"px";
                
                if(left_pos==-280)
                {
                    clearInterval(menu_animation);
                }

            },1);
        }
        
    });

  </script>

  <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if necessary -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="/static/js/libs/jquery.js">\x3C/script>')</script>
  <!-- mathiasbynens.be/notes/async-analytics-snippet Change UA-XXXXX-X to be your site's ID -->
  <script>
    var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script')); 
  </script>

  
</body>
</html>
